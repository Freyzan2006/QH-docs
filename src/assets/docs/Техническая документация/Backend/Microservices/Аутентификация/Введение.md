### QH-Backend-auth

---

## Описание

Microservice авторизации пользователей. Предназначены для инфраструктуры QH-Backend.
Основан на JWT Token. Взаимодействие по REST API.

---

## Техническая часть

1. База данных - MongoDB
2. Аутентификация - JWT
3. Язык и технологии:
   - Node.js
   - Express
   - MongoDB
   - TypeScript

---

## Установка

Для разработчиков: 1. `npm install` or `yarn install` or `pnpm install` or `bun i`;

Для пользователей: 1. Скачайте docker 2. Запустите docker-compose up

.env:

```bash
DB_URL = mongodb+srv://<login>:<Пароль>@cluster0.i3negrf.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
PORT = 8000 # порт на котором будет запускаися приложение

JWT_ACCESS_SECRET = jwt-secret-key # ключ для генерации токена
JWT_REFRESH_SECRET = jwt-refresh-secret-key # ключ для генерации refresh токена

# Для активации аккаунта
SMTP_HOST = <Хост почтовой системы> # smtp.gmail.com
SMTP_PORT =  <Порт хоста почтовой системы> # 587
SMTP_USER = <Почта от которой отправляется письмо> # freyzan2006@gmail.com
SMTP_PASSWORD = <Пароль>



API_URL = <Backend URL> # http://localhost:8000
CLIENT_URL = <Frontend URL> # http://localhost:3000
```

---

## Запуск

    1. `npm run start` or `yarn start` or `pnpm start` or `bun run start`;
    2. Переход по адресу http://localhost:8000 (По умолчанию)
    3. Переход по адресу http://localhost:8000/api/v1/docs (Документация)

---

## Проектные технологии:

Технологии для Активации аккаунта:
`nodemailer` - для работы с письмами для активации аккаунта
`bcrypt` - для хеширования паролей
`uuid` - для генерации уникальных id

Технологии для Авторизации:
`jsonwebtoken` - для работы с JWT токенами
`cookie-parser` - для работы с куками(и хранения в них refresh токена)

Общие технологии:
`cors` - для работы с CORS
`express-validator` - для валидации данных (валидация входных данных)
`mongoose` - для работы с базой данных. В ORM стиле.
`mongodb` - для работы с базой данных.
`dotenv` - для работы с переменными окружения

---

## Проектная структура:

src/controllers - контроллеры
src/models - модели
src/routes - маршруты
src/services - сервисы
src/types - типы
src/utils - утилиты
src/main.ts - точка входа

Основано на архитектуре MVC + От себя: - controllers - контроллеры - models - модели - routes - маршруты - services - сервисы - types - типы - utils - утилиты

---